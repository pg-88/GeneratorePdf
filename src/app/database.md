# Database

Firebird 2.5 dialect 3 

## Tabelle

Sono state create 3 tabelle:
- PRN_TEMPLATE contiene le info per identificare e posizionare gli elementi nella pagina
- PRN_FIELDSET viene inserito in template e serve a definire i vari tipi di elemento 
- PRN_RECORDSET 

### TEMPLATE
/******************************************************************************/
/*                 Generated by IBExpert 24/05/2023 17:36:23                  */
/******************************************************************************/

/******************************************************************************/
/*        Following SET SQL DIALECT is just for the Database Comparer         */
/******************************************************************************/
SET SQL DIALECT 3;



/******************************************************************************/
/*                                   Tables                                   */
/******************************************************************************/


CREATE GENERATOR GEN_PRN_TEMPLATE_ID;

CREATE TABLE PRN_TEMPLATE (
    ID             INTEGER NOT NULL,
    TEMPLATENAME   CHAR(30) NOT NULL,
    FIELDDESCR     CHAR(30) NOT NULL,
    FIELDTYPE      CHAR(30) NOT NULL,
    POSX           INTEGER,
    POSY           INTEGER,
    WIDTH          INTEGER,
    HEIGHT         INTEGER,
    FIXVALUE       CHAR(100),
    GRIDNAME       CHAR(30),
    GRIDORDER      INTEGER,
    FONTNAME       CHAR(20),
    FONTSIZE       INTEGER,
    FONTSTYLE      CHAR(30),
    FONTCOLOR      CHAR(10),
    FONTALIGN      CHAR(10),
    BACKCOLOR      CHAR(10),
    BORDER         CHAR(10),
    BORDERCOLOR    CHAR(10),
    RECORDSETNAME  CHAR(30),
    FIELDNAME      CHAR(30),
    FIELDSTYLE     CHAR(10)
);




/******************************************************************************/
/*                                Primary Keys                                */
/******************************************************************************/

ALTER TABLE PRN_TEMPLATE ADD CONSTRAINT PK_PRN_TEMPLATE PRIMARY KEY (ID);


/******************************************************************************/
/*                                  Triggers                                  */
/******************************************************************************/


SET TERM ^ ;



/******************************************************************************/
/*                            Triggers for tables                             */
/******************************************************************************/



/* Trigger: PRN_TEMPLATE_BI */
CREATE OR ALTER TRIGGER PRN_TEMPLATE_BI FOR PRN_TEMPLATE
ACTIVE BEFORE INSERT POSITION 0
as
begin
  if (new.id is null) then
    new.id = gen_id(gen_prn_template_id,1);
end
^


SET TERM ; ^



/******************************************************************************/
/*                            Fields descriptions                             */
/******************************************************************************/

COMMENT ON COLUMN PRN_TEMPLATE.TEMPLATENAME IS 
'nome del template';

COMMENT ON COLUMN PRN_TEMPLATE.FIELDDESCR IS 
'descrizione univoca del campo';

COMMENT ON COLUMN PRN_TEMPLATE.FIELDTYPE IS 
'tipo del campo (riferimento tabella PRN_FIELDTYPE per valori possibili e descrizioni)';

COMMENT ON COLUMN PRN_TEMPLATE.POSX IS 
'posizione asse X del campo (sinistra, centro o destra a seconda del valore presente nel campo FontAlign)';

COMMENT ON COLUMN PRN_TEMPLATE.POSY IS 
'posizione asse Y del campo';

COMMENT ON COLUMN PRN_TEMPLATE.WIDTH IS 
'larghezza massima del campo';

COMMENT ON COLUMN PRN_TEMPLATE.HEIGHT IS 
'altezza massima del campo';

COMMENT ON COLUMN PRN_TEMPLATE.FIXVALUE IS 
'valore fisso o percorso di immagini, loghi, etc';

COMMENT ON COLUMN PRN_TEMPLATE.GRIDNAME IS 
'nome della griglia di cui eventualmente il campo fa parte';

COMMENT ON COLUMN PRN_TEMPLATE.GRIDORDER IS 
'ordine della colonna nella griglia di cui fa parte';

COMMENT ON COLUMN PRN_TEMPLATE.FONTNAME IS 
'nome del font';

COMMENT ON COLUMN PRN_TEMPLATE.FONTSIZE IS 
'dimensione del font';

COMMENT ON COLUMN PRN_TEMPLATE.FONTSTYLE IS 
'stile del font (vuoto, BOLD, ITALIC)';

COMMENT ON COLUMN PRN_TEMPLATE.FONTCOLOR IS 
'colore del font';

COMMENT ON COLUMN PRN_TEMPLATE.FONTALIGN IS 
'allineamento del font (LEFT, CENTER, RIGHT)';

COMMENT ON COLUMN PRN_TEMPLATE.BACKCOLOR IS 
'colore dello sfondo';

COMMENT ON COLUMN PRN_TEMPLATE.BORDER IS 
'stile del bordo della cella della griglia
valori accettati????
NONE
ALL
LEFT
RIGHT
TOP
BOTTOM';

COMMENT ON COLUMN PRN_TEMPLATE.BORDERCOLOR IS 
'colore del bordo della griglia';

COMMENT ON COLUMN PRN_TEMPLATE.RECORDSETNAME IS 
'nome del recordset ';

COMMENT ON COLUMN PRN_TEMPLATE.FIELDNAME IS 
'nome del campo del recordset';

COMMENT ON COLUMN PRN_TEMPLATE.FIELDSTYLE IS 
'stile del campo 
SHRINK 
WRAP';



/******************************************************************************/
/*                                 Privileges                                 */
/******************************************************************************/


### FIELDTYPE

/******************************************************************************/
/*                 Generated by IBExpert 24/05/2023 17:36:48                  */
/******************************************************************************/

/******************************************************************************/
/*        Following SET SQL DIALECT is just for the Database Comparer         */
/******************************************************************************/
SET SQL DIALECT 3;



/******************************************************************************/
/*                                   Tables                                   */
/******************************************************************************/



CREATE TABLE PRN_FIELDTYPE (
    FIELDTYPE    CHAR(30) NOT NULL,
    DESCRIPTION  CHAR(100),
    NOTES        BLOB SUB_TYPE 1 SEGMENT SIZE 80
);




/******************************************************************************/
/*                                Primary Keys                                */
/******************************************************************************/

ALTER TABLE PRN_FIELDTYPE ADD CONSTRAINT PK_PRN_FIELDTYPE PRIMARY KEY (FIELDTYPE);


/******************************************************************************/
/*                                 Privileges                                 */
/******************************************************************************/



### RECORDSET

/******************************************************************************/
/*                 Generated by IBExpert 24/05/2023 17:37:17                  */
/******************************************************************************/

/******************************************************************************/
/*        Following SET SQL DIALECT is just for the Database Comparer         */
/******************************************************************************/
SET SQL DIALECT 3;



/******************************************************************************/
/*                                   Tables                                   */
/******************************************************************************/



CREATE TABLE PRN_RECORDSET (
    TEMPLATENAME   CHAR(30) NOT NULL,
    RECORDSETNAME  CHAR(30) NOT NULL,
    SCRIPTSQL      BLOB SUB_TYPE 1 SEGMENT SIZE 80,
    KEYNAME        CHAR(100)
);




/******************************************************************************/
/*                                Primary Keys                                */
/******************************************************************************/

ALTER TABLE PRN_RECORDSET ADD CONSTRAINT PK_PRN_RECORDSET PRIMARY KEY (TEMPLATENAME, RECORDSETNAME);


/******************************************************************************/
/*                                 Privileges                                 */
/******************************************************************************/
